parameters:
    pgs_hash_id.hashids.class: Hashids\Hashids
    pgs_hash_id.decorator.router.class: Pgs\HashIdBundle\Decorator\RouterDecorator
    pgs_hash_id.reflection_provider.class: Pgs\HashIdBundle\Reflection\ReflectionProvider
    pgs_hash_id.annotation_provider.class: Pgs\HashIdBundle\AnnotationProvider\AnnotationProvider
    pgs_hash_id.parameters_processor.encode.class: Pgs\HashIdBundle\ParametersProcessor\Encode
    pgs_hash_id.parameters_processor.decode.class: Pgs\HashIdBundle\ParametersProcessor\Decode
    pgs_hash_id.parameters_processor.no_op.class: Pgs\HashIdBundle\ParametersProcessor\NoOp
    pgs_hash_id.parameters_processor.factory.abstract.class: Pgs\HashIdBundle\ParametersProcessor\Factory\AbstractParametersProcessorFactory
    pgs_hash_id.parameters_processor.factory.encode.class: Pgs\HashIdBundle\ParametersProcessor\Factory\EncodeParametersProcessorFactory
    pgs_hash_id.parameters_processor.factory.decode.class: Pgs\HashIdBundle\ParametersProcessor\Factory\DecodeParametersProcessorFactory
    pgs_hash_id.event_subscriber.decode_controller_parameters.class: Pgs\HashIdBundle\EventSubscriber\DecodeControllerParametersSubscriber
    pgs_hash_id.service.decode_controller_parameters.class: Pgs\HashIdBundle\Service\DecodeControllerParameters

services:
    pgs_hash_id.hashids:
        class: '%pgs_hash_id.hashids.class%'
        arguments:
            - '%pgs_hash_id.salt%'
            - '%pgs_hash_id.min_hash_length%'
            - '%pgs_hash_id.alphabet%'

    pgs_hash_id.decorator.router:
        class: '%pgs_hash_id.decorator.router.class%'
        public: false
        decorates: router
        arguments:
          - "@router.default"
          - "@pgs_hash_id.parameters_processor.factory.encode"

    pgs_hash_id.reflection_provider:
        class: '%pgs_hash_id.reflection_provider.class%'

    pgs_hash_id.annotation_provider:
        class: '%pgs_hash_id.annotation_provider.class%'
        arguments:
          - '@annotation_reader'
          - '@pgs_hash_id.reflection_provider'

    pgs_hash_id.parameters_processor.encode:
        class: '%pgs_hash_id.parameters_processor.encode.class%'
        arguments: ['@pgs_hash_id.hashids']

    pgs_hash_id.parameters_processor.decode:
        class: '%pgs_hash_id.parameters_processor.decode.class%'
        arguments: ['@pgs_hash_id.hashids']

    pgs_hash_id.parameters_processor.no_op:
        class: '%pgs_hash_id.parameters_processor.no_op.class%'

    pgs_hash_id.parameters_processor.factory.abstract:
        class: '%pgs_hash_id.parameters_processor.factory.abstract.class%'
        abstract: true
        arguments:
            - '@pgs_hash_id.annotation_provider'
            - '@pgs_hash_id.parameters_processor.no_op'

    pgs_hash_id.parameters_processor.factory.encode:
        class: '%pgs_hash_id.parameters_processor.factory.encode.class%'
        parent: pgs_hash_id.parameters_processor.factory.abstract
        arguments:
            - '@pgs_hash_id.parameters_processor.encode'

    pgs_hash_id.parameters_processor.factory.decode:
        class: '%pgs_hash_id.parameters_processor.factory.decode.class%'
        parent: pgs_hash_id.parameters_processor.factory.abstract
        arguments:
            - '@pgs_hash_id.parameters_processor.decode'

    pgs_hash_id.service.decode_controller_parameters:
        class: '%pgs_hash_id.service.decode_controller_parameters.class%'
        arguments: ['@pgs_hash_id.parameters_processor.factory.decode']

    pgs_hash_id.event_subscriber.decode_controller_parameters:
        class: '%pgs_hash_id.event_subscriber.decode_controller_parameters.class%'
        arguments: ['@pgs_hash_id.service.decode_controller_parameters']
        tags:
            - { name: kernel.event_subscriber }